'use strict'

var CryptoJS = require('crypto-js')
var crypto = require('crypto')

// old way
// --------------------
var data = {
  password: 'azer1234'
}
var makeSalt = function () {
  return crypto.randomBytes(16).toString('base64')
}
var encryptPassword = function (password) {
  var salt = new Buffer(data.salt, 'base64')
  return crypto.pbkdf2Sync(data.password, salt, 10000, 64).toString('base64')
}
data.salt = makeSalt()
data.hashedPassword = encryptPassword(data.password)
console.dir(data)

// new way
// --------------------
var data = {
  password: 'azer1234'
}
var makeSalt = function () {
  return CryptoJS.enc.Base64.stringify(CryptoJS.lib.WordArray.random(16))
}
var encryptPassword = function (password) {
  var salt = new Buffer(data.salt, 'base64')
  return salt
  return crypto.pbkdf2Sync(data.password, salt, 10000, 64).toString('base64')
}
data.salt = makeSalt()
data.hashedPassword = encryptPassword(data.password)
console.dir(data)
